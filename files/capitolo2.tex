\chapter{Sviluppo del progetto}
In questo capitolo verranno descritte nel dettaglio tutte le parti che costituiscono il progetto di tesi. In particolare si parlerà di obiettivo e requisiti, struttura del documento XML, class diagram, design pattern utilizzati, struttura del modello NetLogo costruito.\\ 

\section{Obiettivo e requisiti}
L'obiettivo di questa tesi è creare un programma che sia in grado di ricevere in ingresso la struttura del modello descritta in linguaggio XML e di scrivere in modo automatico il codice NetLogo che possa eseguire la simulazione di interesse, rendendo, quindi, trasparente il processo di scrittura del codice.\\
Il progetto è stato sviluppato in linguaggio Java. Per l'analisi del documento XML si è scelta la libreria JDOM\footnote{http://www.jdom.org/}. Per la scrittura del codice NetLogo, invece, è stata usata la libreria di stream standard di Java.
Lo strumento in questione segue il seguente workflow:
\begin{itemize}
\item analisi del documento XML e costruzione degli oggetti Java per la rappresentazione del modello
\item visita degli oggetti Java e scrittura su file del codice NetLogo
\end{itemize}

\section{Struttura del documento XML}
La struttura del documento XML prevista per il funzionamento del nostro strumento si attiene il più possibile allo standard di formato GraphML\footnote{http://graphml.graphdrawing.org/} (approvato dal W3C) in modo da evitare inconsistenze e incomprensioni, soprattutto per la parte in cui è descritta la topologia dell'ambiente, per la quale questo formato è pienamente adatto.
Il file XML è suddiviso in tre sezioni distinte:
\begin{itemize}
\item \texttt{Graph}
\item \texttt{Behaviors}
\item \texttt{System}
\end{itemize} 
\texttt{Graph} rappresenta la topologia dell'ambiente in cui gli attori si muovono, ed è descritta sotto-forma di grafo con \texttt{edges} che rappresentano le strade e \texttt{nodes} che rappresentano gli incroci. Gli edges possono essere \texttt{directed} e \texttt{undirected}, per ognuno di essi vengono specificati peso e larghezza. I nodes invece possono essere di tre tipi, normal, entry o exit, per tutti e tre i tipi vengono specificate coordinate spaziali e dimensioni fisiche dell'incrocio che esso rappresenta.\\
Per quanto riguarda i \texttt{Behavior} si è preferito distaccarci leggermente dallo standard, in modo da avere una struttura più comprensibile, usando gli specifici tag \texttt{<behavior \textbackslash>}. Per ogni behavior viene indicato la tipologia, l'identificatore e la lista dei nodi di interesse.\\
La sezione \texttt{System} descrive lo stato iniziale (\texttt{state}) dell'ambiente. Per ogni nodo indica il numero di attori presenti e i loro behavior. In particolare nei nodi contrassegnati come entry o exit viene aggiunta una sezione denominata \texttt{parameters} in cui si specificano la frequenza di generazione o eliminazione degli attori e le percentuali relative ad ogni behavior. Per i nodi di ingresso viene anche indicato un limite superiore agli attori generabili.

\section{Class Diagram}
L'unico scopo delle classi Java utilizzate è quello di rappresentare e conservare l'informazione raccolta dal documento XML, senza eseguire alcun tipo di manipolazione. Per questo motivo abbiamo cercato di mantenere la struttura delle classi il più semplice possibile, come mostrato in figura 1
\begin{figure}[htbp]
\centering
\includegraphics[width= 15cm,keepaspectratio]{../../../Documenti/class}
\caption{File \protect\url{../../../Documenti/classf}\label{fig:class-diagram}}
\end{figure}
