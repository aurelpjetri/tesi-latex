\chapter{Contesto teorico}
In questo capitolo si descrive il contesto di ricerca in cui si inserisce questo progetto di tesi, andando a descrivere lo stato dell'arte della simulazione delle masse (Sezione \ref{sec:simulazione-masse}). Successivamente si fornisce una descrizione dell'ambiente NetLogo (Sezione \ref{sec:netlogo}) e dei Design Patterns (Sezione \ref{sec:builder} e \ref{sec:visitor}) che questo progetto usa al fine di una migliore comprensione e chiarezza dei concetti esposti nel Capitolo \ref{cap:sviluppo-progetto}.
\section{Simulazione delle masse}
\label{sec:simulazione-masse}
Come già accennato nell'introduzione, la simulazione delle masse è un ambito di ricerca che negli ultimi anni ha guadagnato molta rilevanza. Questo grazie a un miglioramento delle capacità computazionali e dei metodi utilizzati, ma anche grazie a una maggiore frequenza degli eventi sociali e delle loro dimensioni crescenti. Quindi diventa sempre più importante la capacità di prevedere i movimenti delle masse in modo da garantire la sicurezza delle persone in ogni tipo di situazione.\\
Le criticità che rendono la modellazione delle masse un problema complesso sono le sue grandi dimensioni oltre ai comportamenti individuali, sia sociali che fisici.\\
Descriviamo brevemente gli approcci più diffusi e riconosciuti per la simulazione delle masse per andare poi a soffermarci sull'approccio gerarchico in cui si inserisce questo progetto di tesi.
\subsection{Stato dell'arte}
Nella modellazione delle masse il maggior problema è dimensione del modello da studiare. Le risposte ideate per risolvere questa criticità sono state molte e possono essere divise in due categorie sulla base del loro approccio: micro-scala e macro-scala.  
L'approccio a micro-scala si basano sull'idea di rappresentare ogni persona come agente o macchina a stati finiti. I tre approcci più usati sono: \textit{social force model}, \textit{cellular automata}, \textit{magnetic force model} e \textit{rule-based model}.\\
Il social force model introdotto da Helbing e i suoi collaboratori \cite{helbing} si fonda sul concetto che le forze sociali possono essere rappresentate come forze meccaniche tra particelle, ovvero tra persone. Le forse prese in considerazione sono repulsione, attrito e dissipazione. Solitamente questi modelli arrivano ad essere molto espressivi permettendo di descrivere comportamenti sia fisici che sociali nel modello.\\
Il magnetic force model \cite{okazaki} è simile al precedente approccio, esso modella le persone come poli positivi, allo stesso modo anche gli ostacoli da evitare vengono visti come poli positivi, al contrario i punti di interesse sono modellati come poli negativi. In questo modo gli agenti sono attratti dai loro punti di interesse e evitano le collisioni.\\
L'approccio cellular automata \cite{dijkstra} caratterizzato da una griglia bidimensionale dove una cellula è definita dal suo stato, che evolve nel tempo sulla base del proprio valore e dello stato delle cellule adiacenti. Modificando il numero di cellule che influenzano lo stato si possono rappresentare comportamenti diversi, ad esempio per il contatto fisico si usa un insieme molto ristretto di cellule, al contrario per il campo visivo si usa un numero maggiore di cellule.\\
Infine il rule-based model \cite{reynolds} presenta spazio e tempo continui e prevede di modificare la velocità e la direzione di un attore sulla base di determinate regole, come conformismo, anticonformismo e coesione.\\
\subsection{Approccio gerarchico}
 L'approccio proposto (da Sandro Mehic, Marco Paolieri e Enrico Vicario) in \cite{hierarchical-report} per affrontare il problema della simulazione delle masse è di tipo gerarchico. Si scompone la simulazione in tre livelli di scala diversi in modo da ottenere una soluzione analitica indipendente dal numero di agenti.\\
 Al primo livello si usa una modellazione di tipo microscopico basata su agenti (Agent Based Modeling) per ottenere parametri come tempo medio di soggiorno e probabilità di transizione. Oltre alle strategie di movimento si introducono due paradigmi diversi di comportamento che modellano l'aspetto sociale della folla.\\
 Il primo è l'altruismo, ovvero la probabilità che un attore aiuti un altro attore con una capacità di movimento minore della sua, è stato dimostrato infatti che questa risulta essere un aspetto caratteristico delle masse. Il secondo è il conformismo, ovvero quanto questo attore tenderà ad unirsi alla massa oppure a cambiare percorso di fronte a una strada affollata.\\
L'aspetto fisico dell'attore invece, inteso come strategia di movimento, consiste nell'individuazione e raggiungimento dell'uscita più vicina.
\section {NetLogo} 
\label{sec:netlogo}
NetLogo \nocite{wilensky-tisue} \cite{netlogo} è un linguaggio di programmazione e un ambiente di modellazione di sistemi complessi. Adatto per la simulazione e lo studio di fenomeni naturali e sociali che si evolvono nel tempo.\\
Gli utenti possono dare istruzioni a migliaia di agenti che operano in modo concorrenziale. Questi comandi possono essere dati in modo individuale o collettivo, permettendo quindi lo studio dei comportamenti su più livelli, come quello microscopico dei behaviors individuali o quello macroscopico delle loro interazioni con gli altri.\\
NetLogo è usato per costruire una infinita varietà di simulazioni. I suoi turtles sono stati trasformati in molecole, lupi, clienti, commercianti, api, uccelli, batteri, macchine, magneti, pianeti, formiche e molto altro. Le sue patches allo stesso modo sono state usate come alberi, muri, corsi d'acqua, cellule tumorali, cellule vegetali e altro ancora. Turtles a patches possono essere usate per studiare astrazioni matematiche, ma anche per fare arte o giocare.\\
Tra i temi studiati con questo strumento ci sono automi cellulari, algoritmi generici, evoluzione, ottimizzazione e individuazione di percorsi, dinamiche della popolazione e società artificiali.\\
Tutti questi modelli condividono il topic centrale perseguito da questo strumento che sono i sistemi complessi e i comportamenti emergenti.\\
Il più grande miglioramento apportato a partire dalla versione 2.0 in poi riguarda la grafica. In particolare i turtles possono essere di qualsiasi forma e dimensione e soprattutto possono essere posizionati in qualsiasi punto dello spazio. La loro grafica è di tipo vettoriale in modo da non avere perdita di qualità dell'immagine a qualsiasi scala si visualizzi il modello.\\

\subsection{Storia}
Nasce a scopo educativo e di ricerca, dalla fusione di \textbf{Logo} e \textbf{StarLisp}. Dal primo eredita il principio \textit{”low threshold , no ceiling”}, ovvero bassa soglia di conoscenza per il suo utilizzo, rendendolo accessibile a utenti inesperti nella programmazione, ma allo stesso tempo completa programmabilità rendendolo quindi anche uno strumento utile per la ricerca.\\
Da Logo viene ereditato anche il concetto fondamentale di \textit{turtle}, con la differenza che Logo permetteva il controllo di un unico agente, mentre un modello NetLogo può averne migliaia. Da StarLisp, invece, NetLogo eredita i molteplici agenti e la loro \textit{concurrency}.\\
Il design di NetLogo si basa sulla precedente esperienza dei suoi creatori con StarLogoT[Wilensky, 1997] (Wilensky, Uri, StarLogoT, Center for Connected Learning and Computer-Based Modeling, Northwestern University.http://ccl.northwestern.edu/cm/starlogot/), di cui sono stati rielaborati quasi interamente sia l'interfaccia che il linguaggio, aggiungendo soprattutto funzionalità destinate a utenti nel campo della ricerca.

\subsection{Linguaggio}
Come Linguaggio NetLogo si evolve da Logo al quale aggiunge il concetto di agenti e di concurrency. In generale Logo è molto conoscuto per il concetto di \textbf{turtle} che ha introdotto. NetLogo generalizza questo permettendo il controllo di centinaia o migliaia di turtles che si muovono e interagiscono tra di loro.\\
Il mondo in cui i turtles si muovono è suddiviso in \textbf{patches} anche esse interamente programmabili, sia turtles che patches vengono chiamate collettivamente \textbf{agents}. Tutti gli agenti possono interagire tra di loro e eseguire istruzioni in modo concorrenziale. NetLogo include inoltre un terzo tipo di agente, l'\textbf{observer} il quale è unico. In generale l'observer è quello che impartisce ordini agli agenti.\\
Possono essere definite diverse “razze” (\textbf{breeds}) di turtles, ciascuna con variabili e behaviors caratteristici.\\
Una peculiarità che contraddistingue NetLogo dai suoi predecessori sono gli “agentsets”, ovvero insiemi di agenti.

\section{Builder Pattern}
\label{sec:builder}


\section{Visitor Pattern}
\label{sec:visitor}


 
